---
title:  "TIL_2020년 8월 24일 (월)"
excerpt: "TIL - 매일 한 것, 배운 것과 느낀점을 정리합니다"

categories:
  - TIL
tags:
  - TIL
  - USStock
---


<h3>목차</h3>

- [1.오늘 한 일](#1오늘-한-일)
- [2.오늘 배운 것과 깨달은 것](#2오늘-배운-것과-깨달은-것)
- [3.오늘 진행한 작업물 (사진)](#3오늘-진행한-작업물-사진)
  

### 1.오늘 한 일

1. 데이터테이블 불러오기 성공!
    - 어제 status 200을 내보내는데, 계속 데이터가 안불러와서 힘들었는데 오늘 성공했다!    
      역시 작은 이유일 줄 알았다. 내가 api를 내보내는 주소를 동일한 이름으로 지정해서 같은 이름의 api가 동시에 쏘고있었다.
      휴.. 어쨌든 해결했다. 데이터가 정상적으로 불러오던게 얼마나 좋던지... 짜릿하다. 개발의 맛인듯...ㅋㅋㅋㅋ

      
    
2. yahoo finance API 연동 성공!
    - 선생님의 도움을 조금 받았다. loadStockInfo 라는 함수를 지정하고, yahoo finance api에서 데이터를 받아왔다.
      데이터를 받아온 이후 그 값을 각 ticker와 column에 맞게 매치해줬더니, 현재가, 종목명, 섹터 등이 표기되었다!     
      야호! 신난다 ㅋㅋㅋ       
    
      
    
      여기까진 좋았다. 좋았었다. 또 다른 난관을 만나기 전까진...    
    
      -  문제점 1. stock과 fund의 데이터 호출값이 또 다르다.   
    
        아니 누가 이렇게 만들었어! 에허... 현재가는 다행히 겹치는 항목을 찾아서 붙여줬더니 괜찮았는데, sector랑 desc는 찾지못했다. 이건 다른 방법을 찾아보자.
    
         - 문제점 2. too many requests.   
        처음에 종목수가 3개일 때는 조금 느려도 데이터를 잘 불러왔다.
        그런데 종목 수를 추가로 10개 이상 늘려보니 too many requests라서 값을 줄 수 없다더라. 이건 어떻게 해결해야하는 지 다시 찾아보는 중이다. 아마 1개의 종목당 약 100개의 데이터를 쏴주면 10개의 종목이면 1000개의 데이터이다. 그 중에 또 내가 원하는 것만 뽑아내는 것이니까 호출수가 너무 많았나보다. 방법을 찾아보자! 찾으면 되는거지 뭐 ㅋㅋㅋ
    
        
    
3. calculate 시도
    - 수익률, 손익, 평가금액, 비중은 자체 데이터베이스에 있는 값과 API로 호출한 값을 조합해서 계산해야한다.
        - 평가금액 : 현재가(API) * 수량 (DB)
        - 손익 : (현재가(API) - 평균매수가(DB)) * 수량(DB)
        - 수익률 : 손익 / 평균매수가(DB)   
        - 비중 : 1개의 종목의 평가금액 / 모든 종목 평가금액의 합 (이건 차라리 맨 밑에 sum값을 더해두는게 좋을듯)
    이걸 어떻게 할 수 있을 지. 또 이런 저런 삽질을 하면서 공부하고 있다. 할 수 있을거야~
    이것까지만 되면 이제 표는 거의 완성이다. 꾸미는건 정말 나중에 하고 기능구현에 조금 더 집중하는걸로~    

### 2.오늘 배운 것과 깨달은 것

- 개발 = 문제해결의 연속     
    이번 고비가 지나면 다음 고비가 찾아온다.   
    쫄지말고 꾸준히 하면 되리라...

### 3.지금까지 작업물 (사진)

<a href="https://ibb.co/rc8PB35"><img src="https://i.ibb.co/hZQ5Gc2/2020-08-25-11-10-06.png" alt="2020-08-25-11-10-06" border="0"></a>
<a href="https://ibb.co/w6fWtZN"><img src="https://i.ibb.co/XJqsHfZ/2020-08-25-11-10-14.png" alt="2020-08-25-11-10-14" border="0"></a>



